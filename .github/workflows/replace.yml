# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the workflow will run
on:
  # Triggers the workflow on push or pull request events but only for the "main" branch
  push:
    branches: [ "main" ]
  pull_request:
    branches: [ "main" ]

  # Allows you to run this workflow manually from the Actions tab
  workflow_dispatch:

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
      - name: Getting latest Code
        uses: actions/checkout@v2.3.2

      #
      - name: Replace
        uses: rheuvel89/replace-action@v1
        with: 
          files: 'webhooks/test.txt'
          replacements: 'hello=hi,world=good'

      # Replace all the occurrences of 'hello' with 'world' in all the txt files,
      # excluding the node_modules folder
      - name: Replace multiple files
        uses: richardrigutins/replace-in-files@v2
        with:
          files: '**/*.txt'
          search-text: 'hello'
          replacement-text: 'world'
          exclude: 'node_modules/**'
          encoding: 'utf8'
          max-parallelism: 10

      # Replace all the occurrences of '{0}' with '42' in the README.md file
      - name: Replace a single file
        uses: richardrigutins/replace-in-files@v2
        with:
          files: 'README.md'
          search-text: '{0}'
          replacement-text: '42'

      - name: Sync
        uses: stefanzweifel/git-auto-commit-action@v4
